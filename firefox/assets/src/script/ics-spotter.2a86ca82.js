(function() {
  const d_runtime = chrome.runtime;
  const debug = (s, ...a_args) => console.debug(`StarShell.ics-spotter: ${s}`, ...a_args);
  debug(`Launched on <${location.href}>`);
  const h_handlers_window = {
    async requestAdvertisement() {
      debug("Processing #requestAdvertisement");
      await d_runtime.sendMessage({
        type: "requestAdvertisement"
      });
    }
  };
  window.addEventListener("message", (d_event) => {
    debug("Observed window message %o", d_event);
    if (window === d_event.source) {
      const z_data = d_event.data;
      let si_type;
      if (z_data && typeof z_data === "object" && typeof (si_type = z_data.type) === "string") {
        const f_handler = h_handlers_window[si_type];
        if (!f_handler)
          return;
        debug(`Received relay port message having registered type %o`, d_event.data);
        f_handler(z_data);
      }
    }
  });
})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaWNzLXNwb3R0ZXIuMmE4NmNhODIuanMiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uL3NyYy9zY3JpcHQvaWNzLXNwb3R0ZXIudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHR5cGUge1xuXHRBcHBUb1Nwb3R0ZXIsXG5cdEljc1RvU2VydmljZSxcbn0gZnJvbSAnLi9tZXNzYWdlcyc7XG5cbmltcG9ydCB0eXBlIHsgVm9jYWIgfSBmcm9tICcjL21ldGEvdm9jYWInO1xuXG4vKipcbiAqIFRoZSBzcG90dGVyJ3Mgc29sZSBwdXJwb3NlIGlzIHRvIHNpbGVudGx5IGZvcndhcmQgYWR2ZXJ0aXNlbWVudCByZXF1ZXN0cyBmcm9tIHRoZSBwYWdlIHRvIHRoZSBzZXJ2aWNlLlxuICovXG4oZnVuY3Rpb24oKSB7XG5cdC8vIHJlZiBhbmQgY2FzdCBydW50aW1lXG5cdGNvbnN0IGRfcnVudGltZTogVm9jYWIuVHlwZWRSdW50aW1lPEljc1RvU2VydmljZS5QdWJsaWNWb2NhYj4gPSBjaHJvbWUucnVudGltZTtcblxuXHQvLyB2ZXJib3NlXG5cdGNvbnN0IGRlYnVnID0gKHM6IHN0cmluZywgLi4uYV9hcmdzOiBhbnlbXSkgPT4gY29uc29sZS5kZWJ1ZyhgU3RhclNoZWxsLmljcy1zcG90dGVyOiAke3N9YCwgLi4uYV9hcmdzKTtcblx0ZGVidWcoYExhdW5jaGVkIG9uIDwke2xvY2F0aW9uLmhyZWZ9PmApO1xuXG5cdC8vIHByZXAgaGFuZGxlciBtYXBcblx0Y29uc3QgaF9oYW5kbGVyc193aW5kb3c6IFZvY2FiLkhhbmRsZXJzPEFwcFRvU3BvdHRlci5XaW5kb3dWb2NhYj4gPSB7XG5cdFx0Ly8gd2luZG93IGlzIHJlcXVlc3RpbmcgYWR2ZXJ0aXNtZW1lbnRcblx0XHRhc3luYyByZXF1ZXN0QWR2ZXJ0aXNlbWVudCgpIHtcblx0XHRcdC8vIHZlcmJvc2Vcblx0XHRcdGRlYnVnKCdQcm9jZXNzaW5nICNyZXF1ZXN0QWR2ZXJ0aXNlbWVudCcpO1xuXG5cdFx0XHQvLyBsZXQgc2VydmljZSB3b3JrZXIgZGVjaWRlIHdoYXQgdG8gZG9cblx0XHRcdGF3YWl0IGRfcnVudGltZS5zZW5kTWVzc2FnZSh7XG5cdFx0XHRcdHR5cGU6ICdyZXF1ZXN0QWR2ZXJ0aXNlbWVudCcsXG5cdFx0XHR9KTtcblx0XHR9LFxuXHR9O1xuXG5cdC8vIHN0YXJ0IGxpc3RlbmluZyBmb3IgbWVzc2FnZXNcblx0KHdpbmRvdyBhcyBWb2NhYi5UeXBlZFdpbmRvdzxBcHBUb1Nwb3R0ZXIuV2luZG93Vm9jYWI+KS5hZGRFdmVudExpc3RlbmVyKCdtZXNzYWdlJywgKGRfZXZlbnQpID0+IHtcblx0XHQvLyB2ZXJib3NlXG5cdFx0ZGVidWcoJ09ic2VydmVkIHdpbmRvdyBtZXNzYWdlICVvJywgZF9ldmVudCk7XG5cblx0XHQvLyBvcmlnaW5hdGVzIGZyb20gc2FtZSBmcmFtZVxuXHRcdGlmKHdpbmRvdyA9PT0gZF9ldmVudC5zb3VyY2UpIHtcblx0XHRcdC8vIGFjY2VzcyBldmVudCBkYXRhXG5cdFx0XHRjb25zdCB6X2RhdGEgPSBkX2V2ZW50LmRhdGE7XG5cblx0XHRcdC8vIGRhdGEgaXRlbSBjb25mb3Jtc1xuXHRcdFx0bGV0IHNpX3R5cGU7XG5cdFx0XHRpZih6X2RhdGEgJiYgJ29iamVjdCcgPT09IHR5cGVvZiB6X2RhdGEgJiYgJ3N0cmluZycgPT09IHR5cGVvZiAoc2lfdHlwZT16X2RhdGEudHlwZSkpIHtcblx0XHRcdFx0Ly8gcmVmIGhhbmRsZXJcblx0XHRcdFx0Y29uc3QgZl9oYW5kbGVyID0gaF9oYW5kbGVyc193aW5kb3dbc2lfdHlwZV07XG5cblx0XHRcdFx0Ly8gaWdub3JlIGFsbCBvdGhlciBtZXNzYWdlc1xuXHRcdFx0XHRpZighZl9oYW5kbGVyKSByZXR1cm47XG5cblx0XHRcdFx0Ly8gaGFuZGxlciBpcyByZWdpc3RlcmVkOyBleGVjdXRlIGl0XG5cdFx0XHRcdGRlYnVnKGBSZWNlaXZlZCByZWxheSBwb3J0IG1lc3NhZ2UgaGF2aW5nIHJlZ2lzdGVyZWQgdHlwZSAlb2AsIGRfZXZlbnQuZGF0YSk7XG5cdFx0XHRcdGZfaGFuZGxlcih6X2RhdGEpO1xuXHRcdFx0fVxuXHRcdH1cblx0fSk7XG59KSgpO1xuIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQVVDLEFBQVcsWUFBQTtBQUVYLFFBQU0sWUFBMEQsT0FBTztBQUdqRSxRQUFBLFFBQVEsQ0FBQyxNQUFjLFdBQWtCLFFBQVEsTUFBTSwwQkFBMEIsS0FBSyxHQUFHLE1BQU07QUFDL0YsUUFBQSxnQkFBZ0IsU0FBUyxPQUFPO0FBR3RDLFFBQU0sb0JBQThEO0FBQUEsSUFFbkUsTUFBTSx1QkFBdUI7QUFFNUIsWUFBTSxrQ0FBa0M7QUFHeEMsWUFBTSxVQUFVLFlBQVk7QUFBQSxRQUMzQixNQUFNO0FBQUEsTUFBQSxDQUNOO0FBQUEsSUFDRjtBQUFBLEVBQUE7QUFJQSxTQUF1RCxpQkFBaUIsV0FBVyxDQUFDLFlBQVk7QUFFaEcsVUFBTSw4QkFBOEIsT0FBTztBQUd4QyxRQUFBLFdBQVcsUUFBUSxRQUFRO0FBRTdCLFlBQU0sU0FBUyxRQUFRO0FBR25CLFVBQUE7QUFDRCxVQUFBLFVBQVUsT0FBb0IsV0FBcEIsWUFBOEIsT0FBcUIsV0FBUSxPQUFPLFVBQXBDLFVBQTJDO0FBRXJGLGNBQU0sWUFBWSxrQkFBa0I7QUFHcEMsWUFBRyxDQUFDO0FBQVc7QUFHVCxjQUFBLHlEQUF5RCxRQUFRLElBQUk7QUFDM0Usa0JBQVUsTUFBTTtBQUFBLE1BQ2pCO0FBQUEsSUFDRDtBQUFBLEVBQUEsQ0FDQTtBQUNGLEdBQUc7In0=
