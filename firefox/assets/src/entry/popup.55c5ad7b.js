import{S as H,i as K,s as M,a as q,c as y,m as k,t as h,b as v,d as S,e as X,H as G,C as J,f as Q,g as Y,A as F,h as g,j as C,k as f,l as Z,n as u,y as O,o as ee,p as te,q as se,r as ae,u as ne,v as V,I as re,w as N,x as W,z as j,W as oe,P as ie,B as ce,D as le,E as fe,F as ue,V as z,G as I,J as _e,K as pe,L as me,M as de,N as $e,X as be,O as we}from"../../web-resource-cache.fb3e84c9.js";import{A as B,S as ge,H as ye,T as D,d as ke,a as he,b as ve,B as Se,P as Te,c as Ce}from"../../PreRegister.084f3eb8.js";import{s as E}from"../../index.5cb01ff5.js";function Ee(r){let e,s,t;return{c(){e=N("By checking this box, you agree to the "),s=C("a"),s.textContent="Terms and Conditions",t=N("."),W(s,"href","https://starshell.net/tac.html")},m(o,i){f(o,e,i),f(o,s,i),f(o,t,i)},p:j,d(o){o&&u(e),o&&u(s),o&&u(t)}}}function Re(r){let e,s,t,o,i,w,l,m,c,b,d,_,a;e=new G({props:{title:"Create a new wallet"}});function $(n){r[4](n)}let R={id:"",$$slots:{default:[Ee]},$$scope:{ctx:r}};return r[0]!==void 0&&(R.checked=r[0]),c=new J({props:R}),Q.push(()=>Y(c,"checked",$)),_=new F({props:{confirm:["Create new StarShell wallet",r[2],!r[0]],contd:{creator:B,props:{account:r[1]}}}}),{c(){y(e.$$.fragment),s=g(),t=C("p"),t.textContent="This software is currently in beta. Since it has not undergone security audits, importing and exporting of mnemonics and private keys is forbidden.",o=g(),i=C("p"),i.textContent="This means you will not be able to backup seed phrases, private keys, or use hardware wallets.",w=g(),l=C("p"),l.textContent="All transactions take place on a test network.",m=g(),y(c.$$.fragment),d=g(),y(_.$$.fragment)},m(n,p){k(e,n,p),f(n,s,p),f(n,t,p),f(n,o,p),f(n,i,p),f(n,w,p),f(n,l,p),f(n,m,p),k(c,n,p),f(n,d,p),k(_,n,p),a=!0},p(n,p){const x={};p&64&&(x.$$scope={dirty:p,ctx:n}),!b&&p&1&&(b=!0,x.checked=n[0],Z(()=>b=!1)),c.$set(x);const A={};p&1&&(A.confirm=["Create new StarShell wallet",n[2],!n[0]]),p&2&&(A.contd={creator:B,props:{account:n[1]}}),_.$set(A)},i(n){a||(h(e.$$.fragment,n),h(c.$$.fragment,n),h(_.$$.fragment,n),a=!0)},o(n){v(e.$$.fragment,n),v(c.$$.fragment,n),v(_.$$.fragment,n),a=!1},d(n){S(e,n),n&&u(s),n&&u(t),n&&u(o),n&&u(i),n&&u(w),n&&u(l),n&&u(m),S(c,n),n&&u(d),S(_,n)}}}function xe(r){let e,s;return e=new q({props:{$$slots:{default:[Re]},$$scope:{ctx:r}}}),{c(){y(e.$$.fragment)},m(t,o){k(e,t,o),s=!0},p(t,[o]){const i={};o&67&&(i.$$scope={dirty:o,ctx:t}),e.$set(i)},i(t){s||(h(e.$$.fragment,t),s=!0)},o(t){v(e.$$.fragment,t),s=!1},d(t){S(e,t)}}}function Ae(r,e,s){let t;X(r,O,c=>s(1,t=c));let{reset:o=!1}=e,{b_agreed:i=!1}=e;async function w(c,b,d){const _=await V.open(a=>a.put({family:"cosmos",pubkey:b,secret:c,name:"Citizen 1",pfp:d}));return await re.record(null,{type:"account_created",time:Date.now(),data:{account:_}}),_}async function l(){const[c,b]=await ee.generatePrivateKey(!0),d=crypto.randomUUID(),_=await te.open(async R=>R.put({type:"private_key",data:await c.access(n=>se(n)),name:"Auto-generated private key for beta",uuid:d,security:{type:"none"}})),a=b.exportPublicKey(),$=await w(_,ae(a),"");ne(O,t=$,t)}function m(c){i=c,s(0,i)}return r.$$set=c=>{"reset"in c&&s(3,o=c.reset),"b_agreed"in c&&s(0,i=c.b_agreed)},[i,t,l,o,m]}class Ie extends H{constructor(e){super(),K(this,e,Ae,xe,M,{reset:3,b_agreed:0})}}const Pe=/^([<>]=?)?(.+)$/;function Le(r,e){const[,s,t]=Pe.exec(e);return s==="<="?E.lte(r,t):s==="<"?E.lt(r,t):s===">"?E.gt(r,t):s===">="?E.gte(r,t):s==="="?E.equivalent(r,t):!1}async function Oe(){const r=[],e=await oe.get(ie);for(const s of e||[])if(Le(ce,s.affects))switch(s.action){case"restrict":{r.push(s);break}}return r}function Ne(r){let e,s,t,o,i,w,l,m,c,b,d,_;return e=new le({props:{dim:96}}),t=new ge({}),i=new ye({}),d=new F({props:{confirm:["See Instructions",r[0]]}}),{c(){y(e.$$.fragment),s=g(),y(t.$$.fragment),o=g(),y(i.$$.fragment),w=g(),l=C("div"),l.innerHTML=`<div>Please update to continue beta testing.</div> 
		<div>A new version has been released.</div>`,m=g(),c=C("p"),b=g(),y(d.$$.fragment),W(l,"class","large")},m(a,$){k(e,a,$),f(a,s,$),k(t,a,$),f(a,o,$),k(i,a,$),f(a,w,$),f(a,l,$),f(a,m,$),f(a,c,$),f(a,b,$),k(d,a,$),_=!0},p:j,i(a){_||(h(e.$$.fragment,a),h(t.$$.fragment,a),h(i.$$.fragment,a),h(d.$$.fragment,a),_=!0)},o(a){v(e.$$.fragment,a),v(t.$$.fragment,a),v(i.$$.fragment,a),v(d.$$.fragment,a),_=!1},d(a){S(e,a),a&&u(s),S(t,a),a&&u(o),S(i,a),a&&u(w),a&&u(l),a&&u(m),a&&u(c),a&&u(b),S(d,a)}}}function ze(r){let e,s;return e=new q({props:{root:!0,classNames:"restricted",$$slots:{default:[Ne]},$$scope:{ctx:r}}}),{c(){y(e.$$.fragment)},m(t,o){k(e,t,o),s=!0},p(t,[o]){const i={};o&2&&(i.$$scope={dirty:o,ctx:t}),e.$set(i)},i(t){s||(h(e.$$.fragment,t),s=!0)},o(t){v(e.$$.fragment,t),s=!1},d(t){S(e,t)}}}function Be(r){return[()=>fe("https://github.com/SolarRepublic/starshell-beta-releases/blob/main/README.md#updating")]}class De extends H{constructor(e){super(),K(this,e,Be,ze,M,{})}}document.getElementById("factory-reset")?.addEventListener("click",async()=>{await browser.storage.session.clear(),await browser.storage.local.clear(),await T()});let P=null,U=0,L=!1;async function T(){if(L)return;if(L=!0,P)try{P.$destroy()}catch{}try{ue(document.body,"main")?.remove()}catch{}let r=!1,e,s={};const t=await z.getRootKey();if((await Oe()).length)e={creator:De};else if(t){const l=I({logout(){l(),T()}});await _e();const m=await V.read();Object.keys(m.raw).length?(e={creator:Se},r=!0):(e={creator:Ie},s={completed:T})}else{const l=I({login(){l(),T()}});await z.getBase()?e={creator:Ce}:e={creator:Te},s={completed:we}}let i=!1;const w=pe.subscribe(l=>{if(!i){i=!0;return}if(l){let m=function(){clearTimeout(b),b=setTimeout(()=>{c.sendMessage({type:"wake"}),console.warn("Waking idle service worker")},2e3)};w(),r?l.activateThread(D.TOKENS):l.activateThread(D.INIT);try{ke.style.display="none"}catch{}const c=browser.runtime;let b=0;I({heartbeat(){m()}}),r&&m()}});P=new he({target:document.body,props:{mode:"app",page:e},context:new Map(me(s))}),clearTimeout(U),L=!1}if(location.hostname==="localhost")Object.fromEntries(new URLSearchParams(location.search.slice(1)).entries()).autoskip?(console.log("Autoskipping registration"),(async()=>(localStorage.clear(),await de("     "),await $e("     "),T()))()):T();else{U=globalThis.setTimeout(()=>{ve("Fatal time out, likely caused by an uncaught error.")},15*be);try{T()}catch(r){debugger;console.error(r)}}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicG9wdXAuNTVjNWFkN2IuanMiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uL3NyYy9hcHAvc2NyZWVuL0NyZWF0ZVdhbGxldC5zdmVsdGUiLCIuLi8uLi8uLi8uLi8uLi9zcmMvZXh0ZW5zaW9uL3Jlc3RyaWN0aW9ucy50cyIsIi4uLy4uLy4uLy4uLy4uL3NyYy9hcHAvc2NyZWVuL1Jlc3RyaWN0ZWQuc3ZlbHRlIiwiLi4vLi4vLi4vLi4vLi4vc3JjL2VudHJ5L3BvcHVwLnRzIl0sInNvdXJjZXNDb250ZW50IjpbIjxzY3JpcHQgbGFuZz1cInRzXCI+XG5cdGltcG9ydCB7eXdfYWNjb3VudF9yZWZ9IGZyb20gJyMjL21lbSc7XG5cdGltcG9ydCB0eXBlIHsgQWNjb3VudCwgQWNjb3VudFBhdGggfSBmcm9tICcjL21ldGEvYWNjb3VudCc7XG5cdGltcG9ydCB0eXBlIHsgUGZwLCBQZnBQYXRoIH0gZnJvbSAnIy9tZXRhL3BmcCc7XG5cdGltcG9ydCB0eXBlIHsgUmVzb3VyY2UgfSBmcm9tICcjL21ldGEvcmVzb3VyY2UnO1xuXHRpbXBvcnQgeyBBY2NvdW50cyB9IGZyb20gJyMvc3RvcmUvYWNjb3VudHMnO1xuXHRpbXBvcnQgeyBTZWNyZXRzIH0gZnJvbSAnIy9zdG9yZS9zZWNyZXRzJztcblx0aW1wb3J0IHsgb2RlIH0gZnJvbSAnIy91dGlsL2JlbHQnO1xuXHRpbXBvcnQgeyBidWZmZXJfdG9fYmFzZTY0LCBidWZmZXJfdG9fc3RyaW5nOCwgc2hhMjU2X3N5bmMsIHRleHRfdG9fYnVmZmVyIH0gZnJvbSAnIy91dGlsL2RhdGEnO1xuXHRpbXBvcnQgQWN0aW9uc0xpbmUgZnJvbSAnLi4vdWkvQWN0aW9uc0xpbmUuc3ZlbHRlJztcblx0aW1wb3J0IENoZWNrYm94RmllbGQgZnJvbSAnLi4vdWkvQ2hlY2tib3hGaWVsZC5zdmVsdGUnO1xuXHRpbXBvcnQgeyBIZWFkZXIsIFNjcmVlbiB9IGZyb20gJy4vX3NjcmVlbnMnO1xuXG5cdGltcG9ydCB7IFNlY3AyNTZrMUtleSB9IGZyb20gJyMvY3J5cHRvL3NlY3AyNTZrMSc7XG5cdGltcG9ydCB0eXBlIHsgU2VjcmV0LCBTZWNyZXRQYXRoIH0gZnJvbSAnIy9tZXRhL3NlY3JldCc7XG5cdGltcG9ydCBBY2NvdW50RWRpdCBmcm9tICcuL0FjY291bnRFZGl0LnN2ZWx0ZSc7XG5cdGltcG9ydCB7SW5jaWRlbnRzfSBmcm9tICcjL3N0b3JlL2luY2lkZW50cyc7XG5cblxuXHRleHBvcnQgbGV0IHJlc2V0ID0gZmFsc2U7XG5cblx0ZXhwb3J0IGxldCBiX2FncmVlZCA9IGZhbHNlO1xuXG5cdGFzeW5jIGZ1bmN0aW9uIGNyZWF0ZV9hY2NvdW50KHBfc2VjcmV0OiBTZWNyZXRQYXRoLCBzYV9vd25lcjogc3RyaW5nLCBwX3BmcDogUGZwUGF0aCk6IFByb21pc2U8QWNjb3VudFBhdGg+IHtcblx0XHQvLyBvcGVuIGFjY291bnRzIHN0b3JlIGFuZCBzYXZlIG5ldyBhY2NvdW50XG5cdFx0Y29uc3QgcF9hY2NvdW50ID0gYXdhaXQgQWNjb3VudHMub3Blbihrc19hY2NvdW50cyA9PiBrc19hY2NvdW50cy5wdXQoe1xuXHRcdFx0ZmFtaWx5OiAnY29zbW9zJyxcblx0XHRcdHB1YmtleTogc2Ffb3duZXIsXG5cdFx0XHRzZWNyZXQ6IHBfc2VjcmV0LFxuXHRcdFx0bmFtZTogJ0NpdGl6ZW4gMScsXG5cdFx0XHRwZnA6IHBfcGZwLFxuXHRcdH0pKTtcblxuXHRcdC8vIGNyZWF0ZSBldmVudFxuXHRcdGF3YWl0IEluY2lkZW50cy5yZWNvcmQobnVsbCwge1xuXHRcdFx0dHlwZTogJ2FjY291bnRfY3JlYXRlZCcsXG5cdFx0XHR0aW1lOiBEYXRlLm5vdygpLFxuXHRcdFx0ZGF0YToge1xuXHRcdFx0XHRhY2NvdW50OiBwX2FjY291bnQsXG5cdFx0XHR9LFxuXHRcdH0pO1xuXG5cdFx0cmV0dXJuIHBfYWNjb3VudDtcblx0fVxuXG5cdGFzeW5jIGZ1bmN0aW9uIGNyZWF0ZV9wcml2YXRlX2tleSgpIHtcblx0XHQvLyBnZW5lcmF0ZSBuZXcgcHJpdmF0ZSBrZXlcblx0XHRjb25zdCBba2tfc2ssIGtfc2VjcF0gPSBhd2FpdCBTZWNwMjU2azFLZXkuZ2VuZXJhdGVQcml2YXRlS2V5KHRydWUpO1xuXG5cdFx0Ly8gZ2VuZXJhdGUgbmV3IHV1aWQgZm9yIHRoZSBzZWNyZXRcblx0XHRjb25zdCBzX3V1aWQgPSBjcnlwdG8ucmFuZG9tVVVJRCgpO1xuXG5cdFx0Ly8gc2F2ZSBwcml2YXRlIGtleSB0byBzZWNyZXRzIHN0b3JlXG5cdFx0Y29uc3QgcF9zZWNyZXQgPSBhd2FpdCBTZWNyZXRzLm9wZW4oYXN5bmMga3MgPT4ga3MucHV0KHtcblx0XHRcdHR5cGU6ICdwcml2YXRlX2tleScsXG5cdFx0XHRkYXRhOiBhd2FpdCBra19zay5hY2Nlc3MoYXR1OF9zayA9PiBidWZmZXJfdG9fc3RyaW5nOChhdHU4X3NrKSksXG5cdFx0XHRuYW1lOiAnQXV0by1nZW5lcmF0ZWQgcHJpdmF0ZSBrZXkgZm9yIGJldGEnLFxuXHRcdFx0dXVpZDogc191dWlkLFxuXHRcdFx0c2VjdXJpdHk6IHtcblx0XHRcdFx0dHlwZTogJ25vbmUnLFxuXHRcdFx0fSxcblx0XHR9KSk7XG5cblx0XHQvLyBleHBvcnQgcHVibGljIGtleVxuXHRcdGNvbnN0IGF0dThfcGsgPSBrX3NlY3AuZXhwb3J0UHVibGljS2V5KCk7XG5cblx0XHQvLyBcblx0XHRjb25zdCBwX2FjY291bnQgPSBhd2FpdCBjcmVhdGVfYWNjb3VudChwX3NlY3JldCwgYnVmZmVyX3RvX2Jhc2U2NChhdHU4X3BrKSwgJycpO1xuXG5cdFx0Ly8gc2V0IGFjY291bnRcblx0XHQkeXdfYWNjb3VudF9yZWYgPSBwX2FjY291bnQ7XG5cdH1cblx0Ly8gYXN5bmMgZnVuY3Rpb24gY3JlYXRlX3NlZWQoKSB7XG5cdC8vIFx0Ly8gY3JlYXRlIG5ldyBtbmVtb25pY1xuXHQvLyBcdGNvbnN0IGtuX3BhZGRlZCA9IGF3YWl0IGJpcDM5RW50cm9weVRvUGFkZGVkTW5lbW9uaWMoU2Vuc2l0aXZlQnl0ZXMucmFuZG9tKDMyKSk7XG5cblx0Ly8gXHQvLyBzYXZlIHBhZGRlZCBtbmVtb25pYyB0byBzZWNyZXRzIHN0b3JlXG5cdC8vIFx0YXdhaXQgU2VjcmV0cy5vcGVuKGtzID0+IGtzLmFkZCh7XG5cdC8vIFx0XHR0eXBlOiAnbW5lbW9uaWMnLFxuXHQvLyBcdFx0ZGF0YTogYnVmZmVyX3RvX3N0cmluZzgoa25fcGFkZGVkLmRhdGEpLFxuXHQvLyBcdFx0aGludDogJycsXG5cdC8vIFx0XHRuYW1lOiAnTW5lbW9uaWMgS2V5IGZvciBCZXRhJyxcblx0Ly8gXHRcdHV1aWQ6IGNyeXB0by5yYW5kb21VVUlEKCksXG5cdC8vIFx0XHRzZWN1cml0eToge1xuXHQvLyBcdFx0XHR0eXBlOiAnbm9uZScsXG5cdC8vIFx0XHR9LFxuXHQvLyBcdH0pKTtcblxuXHQvLyBcdC8vIHRyaW0gcGFkZGVkIG1uZW1vbmljXG5cdC8vIFx0Y29uc3Qga25fdHJpbW1lZCA9IHRyaW1QYWRkZWRNbmVtb25pYyhrbl9wYWRkZWQpO1xuXG5cdC8vIFx0Ly8gZ2VuZXJhdGUgc2VlZFxuXHQvLyBcdGNvbnN0IGtrX3NlZWQgPSBhd2FpdCBiaXAzOU1uZW1vbmljVG9TZWVkKCgpID0+IGtuX3RyaW1tZWQuZGF0YSwgKCkgPT4gVWludDhBcnJheS5mcm9tKFtdKSk7XG5cblxuXHQvLyBcdC8vIGRlcml2ZSBhY2NvdW50XG5cdC8vIFx0Y29uc3QgeV9iaXAzMiA9IEJJUDMyRmFjdG9yeShlY2MpO1xuXHQvLyBcdGF3YWl0IGtrX3NlZWQuYWNjZXNzKChhdHU4X3NlZWQpID0+IHtcblx0Ly8gXHRcdGNvbnN0IHlfbWFzdGVyID0geV9iaXAzMi5mcm9tU2VlZChhdHU4X3NlZWQgYXMgQnVmZmVyKTtcblx0Ly8gXHRcdGNvbnN0IHN4X2JpcDQ0OiBCaXA0NFBhdGggPSBgbS80NCcvNTI5Jy8wJy8wLzBgO1xuXHQvLyBcdFx0eV9tYXN0ZXIuZGVyaXZlUGF0aChzeF9iaXA0NCkucHJpdmF0ZUtleTtcblx0Ly8gXHR9KTtcblxuXHQvLyBcdC8vIGNyZWF0ZSBhY2NvdW50IHVzaW5nIG5ldyBzZWVkXG5cdC8vIFx0YXdhaXQgY3JlYXRlX2FjY291bnQoKTtcblx0Ly8gfVxuPC9zY3JpcHQ+XG5cbjxzdHlsZSBsYW5nPVwibGVzc1wiPlxuXHQuaWNvbiB7XG5cdFx0cGFkZGluZy10b3A6IDI1JTtcblx0fVxuPC9zdHlsZT5cblxuPFNjcmVlbj5cblx0PEhlYWRlclxuXHRcdHRpdGxlPVwiQ3JlYXRlIGEgbmV3IHdhbGxldFwiXG5cdC8+XG5cblx0PHA+XG5cdFx0VGhpcyBzb2Z0d2FyZSBpcyBjdXJyZW50bHkgaW4gYmV0YS4gU2luY2UgaXQgaGFzIG5vdCB1bmRlcmdvbmUgc2VjdXJpdHkgYXVkaXRzLCBpbXBvcnRpbmcgYW5kIGV4cG9ydGluZyBvZiBtbmVtb25pY3MgYW5kIHByaXZhdGUga2V5cyBpcyBmb3JiaWRkZW4uXG5cdDwvcD5cblxuXHQ8cD5cblx0XHRUaGlzIG1lYW5zIHlvdSB3aWxsIG5vdCBiZSBhYmxlIHRvIGJhY2t1cCBzZWVkIHBocmFzZXMsIHByaXZhdGUga2V5cywgb3IgdXNlIGhhcmR3YXJlIHdhbGxldHMuXG5cdDwvcD5cblxuXHQ8cD5cblx0XHRBbGwgdHJhbnNhY3Rpb25zIHRha2UgcGxhY2Ugb24gYSB0ZXN0IG5ldHdvcmsuXG5cdDwvcD5cblxuXHQ8Q2hlY2tib3hGaWVsZCBpZD1cIlwiIGJpbmQ6Y2hlY2tlZD17Yl9hZ3JlZWR9PlxuXHRcdEJ5IGNoZWNraW5nIHRoaXMgYm94LCB5b3UgYWdyZWUgdG8gdGhlIDxhIGhyZWY9XCJodHRwczovL3N0YXJzaGVsbC5uZXQvdGFjLmh0bWxcIj5UZXJtcyBhbmQgQ29uZGl0aW9uczwvYT4uXG5cdDwvQ2hlY2tib3hGaWVsZD5cblxuXHQ8QWN0aW9uc0xpbmUgY29uZmlybT17WydDcmVhdGUgbmV3IFN0YXJTaGVsbCB3YWxsZXQnLCBjcmVhdGVfcHJpdmF0ZV9rZXksICFiX2FncmVlZF19IGNvbnRkPXt7XG5cdFx0Y3JlYXRvcjogQWNjb3VudEVkaXQsXG5cdFx0cHJvcHM6IHtcblx0XHRcdGFjY291bnQ6ICR5d19hY2NvdW50X3JlZixcblx0XHR9LFxuXHR9fSAvPlxuXG48L1NjcmVlbj4iLCJpbXBvcnQge1BfU1RBUlNIRUxMX0RFQ1JFRVMsIFNJX1ZFUlNJT059IGZyb20gJyMvc2hhcmUvY29uc3RhbnRzJztcbmltcG9ydCB7RGVjcmVlLCBXZWJSZXNvdXJjZUNhY2hlfSBmcm9tICcjL3N0b3JlL3dlYi1yZXNvdXJjZS1jYWNoZSc7XG5cbmltcG9ydCAqIGFzIHNlbXZlciBmcm9tICdzZW12ZXInO1xuXG5jb25zdCBSX1NFTVZFUiA9IC9eKFs8Pl09Pyk/KC4rKSQvO1xuXG5mdW5jdGlvbiBzYXRpc2ZpZXMoc2lfdmVyc2lvbjogc3RyaW5nLCBzX3NlbXZlcjogc3RyaW5nKTogYm9vbGVhbiB7XG5cdGNvbnN0IFssIHNfY21wLCBzX2Jhc2VdID0gUl9TRU1WRVIuZXhlYyhzX3NlbXZlcikhO1xuXHRpZignPD0nID09PSBzX2NtcCkge1xuXHRcdHJldHVybiBzZW12ZXIubHRlKHNpX3ZlcnNpb24sIHNfYmFzZSk7XG5cdH1cblx0ZWxzZSBpZignPCcgPT09IHNfY21wKSB7XG5cdFx0cmV0dXJuIHNlbXZlci5sdChzaV92ZXJzaW9uLCBzX2Jhc2UpO1xuXHR9XG5cdGVsc2UgaWYoJz4nID09PSBzX2NtcCkge1xuXHRcdHJldHVybiBzZW12ZXIuZ3Qoc2lfdmVyc2lvbiwgc19iYXNlKTtcblx0fVxuXHRlbHNlIGlmKCc+PScgPT09IHNfY21wKSB7XG5cdFx0cmV0dXJuIHNlbXZlci5ndGUoc2lfdmVyc2lvbiwgc19iYXNlKTtcblx0fVxuXHRlbHNlIGlmKCc9JyA9PT0gc19jbXApIHtcblx0XHRyZXR1cm4gc2VtdmVyLmVxdWl2YWxlbnQoc2lfdmVyc2lvbiwgc19iYXNlKTtcblx0fVxuXG5cdHJldHVybiBmYWxzZTtcbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGNoZWNrX3Jlc3RyaWN0aW9ucygpOiBQcm9taXNlPERlY3JlZVtdPiB7XG5cdGNvbnN0IGFfcmVzdHJpY3Rpb25zOiBEZWNyZWVbXSA9IFtdO1xuXG5cdGNvbnN0IGFfZGVjcmVlcyA9IGF3YWl0IFdlYlJlc291cmNlQ2FjaGUuZ2V0KFBfU1RBUlNIRUxMX0RFQ1JFRVMpIGFzIERlY3JlZVtdO1xuXG5cdC8vIGVhY2ggZGVjcmVlXG5cdGZvcihjb25zdCBnX2RlY3JlZSBvZiBhX2RlY3JlZXMgfHwgW10pIHtcblx0XHQvLyBhZmZlY3RzIHRoaXMgdmVyc2lvblxuXHRcdGlmKHNhdGlzZmllcyhTSV9WRVJTSU9OLCBnX2RlY3JlZS5hZmZlY3RzKSkge1xuXHRcdFx0Ly8gZGVwZW5kaW5nIG9uIGFjdGlvblxuXHRcdFx0c3dpdGNoKGdfZGVjcmVlLmFjdGlvbikge1xuXHRcdFx0XHQvLyByZXN0cmljdCB1c2FnZVxuXHRcdFx0XHRjYXNlICdyZXN0cmljdCc6IHtcblx0XHRcdFx0XHRhX3Jlc3RyaWN0aW9ucy5wdXNoKGdfZGVjcmVlKTtcblx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0fVxuXG5cdFx0XHRcdGRlZmF1bHQ6IHtcblx0XHRcdFx0XHQvLyBpZ25vcmVcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH1cblx0fVxuXG5cdHJldHVybiBhX3Jlc3RyaWN0aW9ucztcbn1cbiIsIjxzY3JpcHQgbGFuZz1cInRzXCI+XG5cdGltcG9ydCB7IFNjcmVlbiB9IGZyb20gJy4vX3NjcmVlbnMnO1xuXG5cdGltcG9ydCBBY3Rpb25zTGluZSBmcm9tICcuLi91aS9BY3Rpb25zTGluZS5zdmVsdGUnO1xuXHRpbXBvcnQgU3RhclNoZWxsTG9nbyBmcm9tICcuLi91aS9TdGFyU2hlbGxMb2dvLnN2ZWx0ZSc7XG5cdGltcG9ydCBTdGFyU2hlbGxUaXRsZSBmcm9tICcuLi91aS9TdGFyU2hlbGxUaXRsZS5zdmVsdGUnO1xuXHRpbXBvcnQgSG9yaXpvbiBmcm9tICcuLi91aS9Ib3Jpem9uLnN2ZWx0ZSc7XG5cdGltcG9ydCB7IG9wZW5fZXh0ZXJuYWxfbGluayB9IGZyb20gJyMvdXRpbC9kb20nO1xuPC9zY3JpcHQ+XG5cbjxzdHlsZSBsYW5nPVwibGVzc1wiPlxuXHRAaW1wb3J0ICcuLi8uLi9zdHlsZS91dGlsLmxlc3MnO1xuXG5cdDpnbG9iYWwoLnJlc3RyaWN0ZWQpIHtcblx0XHRhbGlnbi1pdGVtczogY2VudGVyO1xuXHRcdGp1c3RpZnktY29udGVudDogY2VudGVyO1xuXHRcdHRleHQtYWxpZ246IGNlbnRlcjtcblx0XHRnYXA6IDIwcHg7XG5cdFx0cGFkZGluZy1sZWZ0OiAxNnB4O1xuXHRcdHBhZGRpbmctcmlnaHQ6IDE2cHg7XG5cdFx0YmFja2dyb3VuZC1yZXBlYXQ6IG5vLXJlcGVhdDtcblx0XHRiYWNrZ3JvdW5kLXBvc2l0aW9uOiBjZW50ZXIgdG9wO1xuXHRcdGJhY2tncm91bmQtc2l6ZTogY292ZXI7XG5cblx0XHRwYWRkaW5nLXRvcDogY2FsYyg1MHZoIC0gMTUwcHgpO1xuXHR9XG48L3N0eWxlPlxuXG48U2NyZWVuIHJvb3QgY2xhc3NOYW1lcz0ncmVzdHJpY3RlZCc+XG5cdDxTdGFyU2hlbGxMb2dvIGRpbT17OTZ9IC8+XG5cblx0PFN0YXJTaGVsbFRpdGxlIC8+XG5cblx0PEhvcml6b24gLz5cblxuXHQ8ZGl2IGNsYXNzPVwibGFyZ2VcIj5cblx0XHQ8ZGl2PlBsZWFzZSB1cGRhdGUgdG8gY29udGludWUgYmV0YSB0ZXN0aW5nLjwvZGl2PlxuXHRcdDxkaXY+QSBuZXcgdmVyc2lvbiBoYXMgYmVlbiByZWxlYXNlZC48L2Rpdj5cblx0PC9kaXY+XG5cblx0PHA+XG5cdFx0XG5cdDwvcD5cblxuXHQ8QWN0aW9uc0xpbmUgY29uZmlybT17WydTZWUgSW5zdHJ1Y3Rpb25zJywgKCkgPT4gb3Blbl9leHRlcm5hbF9saW5rKCdodHRwczovL2dpdGh1Yi5jb20vU29sYXJSZXB1YmxpYy9zdGFyc2hlbGwtYmV0YS1yZWxlYXNlcy9ibG9iL21haW4vUkVBRE1FLm1kI3VwZGF0aW5nJyldfSAvPlxuPC9TY3JlZW4+XG4iLCJpbXBvcnQgU3lzdGVtU3ZlbHRlIGZyb20gJyMvYXBwL2NvbnRhaW5lci9TeXN0ZW0uc3ZlbHRlJztcbmltcG9ydCBCbGFua1N2ZWx0ZSBmcm9tICcjL2FwcC9zY3JlZW4vQmxhbmsuc3ZlbHRlJztcbmltcG9ydCBBdXRoZW50aWNhdGVTdmVsdGUgZnJvbSAnIy9hcHAvc2NyZWVuL0F1dGhlbnRpY2F0ZS5zdmVsdGUnO1xuXG5cbmltcG9ydCB0eXBlIHsgU3ZlbHRlQ29tcG9uZW50IH0gZnJvbSAnc3ZlbHRlJztcbmltcG9ydCB0eXBlIHsgUGFnZUNvbmZpZyB9IGZyb20gJyMvYXBwL25hdi9wYWdlJztcbmltcG9ydCB7IFZhdWx0IH0gZnJvbSAnIy9jcnlwdG8vdmF1bHQnO1xuaW1wb3J0IHsgcXMgfSBmcm9tICcjL3V0aWwvZG9tJztcbmltcG9ydCB7IGluaXRpYWxpemVfY2FjaGVzLCB5d19uYXZpZ2F0b3IgfSBmcm9tICcjL2FwcC9tZW0nO1xuaW1wb3J0IHsgVGhyZWFkSWQgfSBmcm9tICcjL2FwcC9kZWYnO1xuaW1wb3J0IHsgRl9OT09QLCBvZGUgfSBmcm9tICcjL3V0aWwvYmVsdCc7XG5pbXBvcnQgeyBkbV9sb2csIGRvbWxvZyB9IGZyb20gJy4vZmFsbGJhY2snO1xuaW1wb3J0IFByZVJlZ2lzdGVyU3ZlbHRlIGZyb20gJyMvYXBwL3NjcmVlbi9QcmVSZWdpc3Rlci5zdmVsdGUnO1xuaW1wb3J0IHsgZ2xvYmFsX2Jyb2FkY2FzdCwgZ2xvYmFsX3JlY2VpdmUgfSBmcm9tICcjL3NjcmlwdC9tc2ctZ2xvYmFsJztcbmltcG9ydCB7IEFjY291bnRzIH0gZnJvbSAnIy9zdG9yZS9hY2NvdW50cyc7XG5pbXBvcnQgQ3JlYXRlV2FsbGV0U3ZlbHRlIGZyb20gJyMvYXBwL3NjcmVlbi9DcmVhdGVXYWxsZXQuc3ZlbHRlJztcbmltcG9ydCB7IGxvZ2luLCByZWdpc3RlciB9IGZyb20gJyMvc2hhcmUvYXV0aCc7XG5pbXBvcnQgeyBYVF9TRUNPTkRTIH0gZnJvbSAnIy9zaGFyZS9jb25zdGFudHMnO1xuaW1wb3J0IHsgY2hlY2tfcmVzdHJpY3Rpb25zIH0gZnJvbSAnIy9leHRlbnNpb24vcmVzdHJpY3Rpb25zJztcbmltcG9ydCBSZXN0cmljdGVkU3ZlbHRlIGZyb20gJyMvYXBwL3NjcmVlbi9SZXN0cmljdGVkLnN2ZWx0ZSc7XG5pbXBvcnQgeyBXZWJSZXNvdXJjZUNhY2hlIH0gZnJvbSAnIy9zdG9yZS93ZWItcmVzb3VyY2UtY2FjaGUnO1xuaW1wb3J0IHsgc3lzZXJyIH0gZnJvbSAnIy9hcHAvY29tbW9uJztcbmltcG9ydCB0eXBlIHsgVm9jYWIgfSBmcm9tICcjL21ldGEvdm9jYWInO1xuaW1wb3J0IHR5cGUgeyBJbnRyYUV4dCB9IGZyb20gJyMvc2NyaXB0L21lc3NhZ2VzJztcblxuLy8gYmluZCBmYWN0b3J5IHJlc2V0IGJ1dHRvblxuZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2ZhY3RvcnktcmVzZXQnKT8uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBhc3luYygpID0+IHtcblx0YXdhaXQgY2hyb21lLnN0b3JhZ2Uuc2Vzc2lvbi5jbGVhcigpO1xuXHRhd2FpdCBjaHJvbWUuc3RvcmFnZS5sb2NhbC5jbGVhcigpO1xuXHRhd2FpdCByZWxvYWQoKTtcbn0pO1xuXG4vLyB0b3AtbGV2ZWwgc3lzdGVtIGNvbXBvbmVudFxubGV0IHljX3N5c3RlbTogU3ZlbHRlQ29tcG9uZW50IHwgbnVsbCA9IG51bGw7XG5cbi8vIGhlYWx0aCBjaGVjayB0aW1lclxubGV0IGlfaGVhbHRoID0gMDtcblxuLy8gYnVzeSByZWxvYWRpbmdcbmxldCBiX2J1c3kgPSBmYWxzZTtcblxuLy8gcmVsb2FkIHRoZSBlbnRpcmUgc3lzdGVtXG5hc3luYyBmdW5jdGlvbiByZWxvYWQoKSB7XG5cdGlmKGJfYnVzeSkgcmV0dXJuO1xuXG5cdGJfYnVzeSA9IHRydWU7XG5cblx0Ly8gZGVzdHJveSBwcmV2aW91cyBzeXN0ZW1cblx0aWYoeWNfc3lzdGVtKSB7XG5cdFx0dHJ5IHtcblx0XHRcdHljX3N5c3RlbS4kZGVzdHJveSgpO1xuXHRcdH1cblx0XHRjYXRjaChlX2Rlc3Ryb3kpIHt9XG5cdH1cblxuXHQvLyByZW1vdmUgc3RhbGUgZG9tXG5cdHRyeSB7XG5cdFx0cXMoZG9jdW1lbnQuYm9keSwgJ21haW4nKT8ucmVtb3ZlKCk7XG5cdH1cblx0Y2F0Y2goZV9yZW1vdmUpIHt9XG5cblx0Ly8gbGF1bmNoIGFwcFxuXHRsZXQgYl9sYXVuY2ggPSBmYWxzZTtcblxuXHQvLyBzdGFydCBwYWdlXG5cdGxldCBnY19wYWdlX3N0YXJ0OiBQYWdlQ29uZmlnO1xuXG5cdC8vIGNvbnRleHRcblx0bGV0IGhfY29udGV4dCA9IHt9O1xuXG5cdC8vIGNoZWNrIGlmIHJvb3Qga2V5IGlzIGFjY2Vzc2libGVcblx0Y29uc3QgZGtfcm9vdCA9IGF3YWl0IFZhdWx0LmdldFJvb3RLZXkoKTtcblxuXHQvLyByZXN0cmljdGlvbnNcblx0Y29uc3QgYV9yZXN0cmljdGlvbnMgPSBhd2FpdCBjaGVja19yZXN0cmljdGlvbnMoKTtcblx0aWYoYV9yZXN0cmljdGlvbnMubGVuZ3RoKSB7XG5cdFx0Z2NfcGFnZV9zdGFydCA9IHtcblx0XHRcdGNyZWF0b3I6IFJlc3RyaWN0ZWRTdmVsdGUsXG5cdFx0fTtcblx0fVxuXHQvLyB2YXVsdCBpcyB1bmxvY2tlZFxuXHRlbHNlIGlmKGRrX3Jvb3QpIHtcblx0XHQvLyByZWdpc3RlciBmb3IgZ2xvYmFsIGV2ZW50c1xuXHRcdGNvbnN0IGZfdW5yZWdpc3RlciA9IGdsb2JhbF9yZWNlaXZlKHtcblx0XHRcdC8vIHN5c3RlbSByZWNlaXZlZCBsb2dvdXQgY29tbWFuZFxuXHRcdFx0bG9nb3V0KCkge1xuXHRcdFx0XHQvLyB1bnJlZ2lzdGVyIHRoaXMgbGlzdGVuZXJcblx0XHRcdFx0Zl91bnJlZ2lzdGVyKCk7XG5cblx0XHRcdFx0Ly8gcmVsb2FkIHN5c3RlbVxuXHRcdFx0XHR2b2lkIHJlbG9hZCgpO1xuXHRcdFx0fSxcblx0XHR9KTtcblxuXHRcdC8vIGxvYWQgY2FjaGVzXG5cdFx0YXdhaXQgaW5pdGlhbGl6ZV9jYWNoZXMoKTtcblxuXHRcdC8vIGNoZWNrIGZvciBhY2NvdW50KHMpXG5cdFx0Y29uc3Qga3NfYWNjb3VudHMgPSBhd2FpdCBBY2NvdW50cy5yZWFkKCk7XG5cblx0XHQvLyBubyBhY2NvdW50czsgbG9hZCBhY2NvdW50IGNyZWF0aW9uXG5cdFx0aWYoIU9iamVjdC5rZXlzKGtzX2FjY291bnRzLnJhdykubGVuZ3RoKSB7XG5cdFx0XHRnY19wYWdlX3N0YXJ0ID0ge1xuXHRcdFx0XHRjcmVhdG9yOiBDcmVhdGVXYWxsZXRTdmVsdGUsXG5cdFx0XHR9O1xuXG5cdFx0XHQvLyBzZXQgY29tcGxldGUgZnVuY3Rpb24gaW4gY29udGV4dFxuXHRcdFx0aF9jb250ZXh0ID0ge1xuXHRcdFx0XHRjb21wbGV0ZWQ6IHJlbG9hZCxcblx0XHRcdFx0Ly8gY29tcGxldGVkOiBGX05PT1AsXG5cdFx0XHR9O1xuXHRcdH1cblx0XHQvLyBhY2NvdW50IGV4aXN0czsgbG9hZCBkZWZhdWx0IGhvbWVzY3JlZW5cblx0XHRlbHNlIHtcblx0XHRcdGdjX3BhZ2Vfc3RhcnQgPSB7XG5cdFx0XHRcdGNyZWF0b3I6IEJsYW5rU3ZlbHRlLFxuXHRcdFx0fTtcblxuXHRcdFx0Ly8gbGF1bmNoIGhvbWVzY3JlZW5cblx0XHRcdGJfbGF1bmNoID0gdHJ1ZTtcblx0XHR9XG5cdH1cblx0Ly8gdmF1bHQgaXMgbG9ja2VkXG5cdGVsc2Uge1xuXHRcdC8vIHJlZ2lzdGVyIGZvciBnbG9iYWwgZXZlbnRzXG5cdFx0Y29uc3QgZl91bnJlZ2lzdGVyID0gZ2xvYmFsX3JlY2VpdmUoe1xuXHRcdFx0Ly8gc3lzdGVtIHJlY2VpdmVkIGxvZ2luIGNvbW1hbmRcblx0XHRcdGxvZ2luKCkge1xuXHRcdFx0XHQvLyB1bnJlZ2lzdGVyIHRoaXMgbGlzdGVuZXJcblx0XHRcdFx0Zl91bnJlZ2lzdGVyKCk7XG5cblx0XHRcdFx0Ly8gcmVsb2FkIHN5c3RlbVxuXHRcdFx0XHR2b2lkIHJlbG9hZCgpO1xuXHRcdFx0fSxcblx0XHR9KTtcblxuXHRcdC8vIHJldHJpZXZlIHJvb3Rcblx0XHRjb25zdCBnX3Jvb3QgPSBhd2FpdCBWYXVsdC5nZXRCYXNlKCk7XG5cblx0XHQvLyBubyByb290IHNldCwgbmVlZCB0byByZWdpc3RlclxuXHRcdGlmKCFnX3Jvb3QpIHtcblx0XHRcdGdjX3BhZ2Vfc3RhcnQgPSB7XG5cdFx0XHRcdGNyZWF0b3I6IFByZVJlZ2lzdGVyU3ZlbHRlLFxuXHRcdFx0fTtcblx0XHR9XG5cdFx0Ly8gcm9vdCBpcyBzZXQsIG5lZWQgdG8gYXV0aGVudGljYXRlXG5cdFx0ZWxzZSB7XG5cdFx0XHRnY19wYWdlX3N0YXJ0ID0ge1xuXHRcdFx0XHRjcmVhdG9yOiBBdXRoZW50aWNhdGVTdmVsdGUsXG5cdFx0XHR9O1xuXHRcdH1cblxuXHRcdC8vIGluIGVpdGhlciBjYXNlLCBzZXQgY29tcGxldGUgZnVuY3Rpb24gaW4gY29udGV4dFxuXHRcdGhfY29udGV4dCA9IHtcblx0XHRcdC8vIGNvbXBsZXRlZDogcmVsb2FkLFxuXHRcdFx0Y29tcGxldGVkOiBGX05PT1AsXG5cdFx0fTtcblx0fVxuXG5cdC8vIHdhaXQgZm9yIG5hdmlnYXRvciB0byBiZSBpbml0aWFsaXplZFxuXHRsZXQgYl9pbml0aWFsaXplZCA9IGZhbHNlO1xuXHRjb25zdCBmX3Vuc3Vic2NyaWJlID0geXdfbmF2aWdhdG9yLnN1YnNjcmliZSgoa19uYXZpZ2F0b3IpID0+IHtcblx0XHQvLyBydW5uZXIgZ2V0cyBjYWxsZWQgaW1tZWRpYXRlbHksIGJ1dCBzeXN0ZW0gaGFzIG5vdCB1cGRhdGVkIG5hdmlnYXRvciB5ZXRcblx0XHRpZighYl9pbml0aWFsaXplZCkge1xuXHRcdFx0Yl9pbml0aWFsaXplZCA9IHRydWU7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXG5cdFx0Ly8gc3lzdGVtIHVwZGF0ZWQgbmF2aWdhdG9yXG5cdFx0aWYoa19uYXZpZ2F0b3IpIHtcblx0XHRcdC8vIHVuc3Vic2NyaWJlIGZyb20gcmVhY3RpdmUgdXBkYXRlc1xuXHRcdFx0Zl91bnN1YnNjcmliZSgpO1xuXG5cdFx0XHQvLyBsYXVuY2ggdG8gaG9tZXNjcmVlblxuXHRcdFx0aWYoYl9sYXVuY2gpIHtcblx0XHRcdFx0a19uYXZpZ2F0b3IuYWN0aXZhdGVUaHJlYWQoVGhyZWFkSWQuVE9LRU5TKTtcblx0XHRcdH1cblx0XHRcdC8vIGxhdW5jaCB0byBpbml0IHRocmVhZFxuXHRcdFx0ZWxzZSB7XG5cdFx0XHRcdGtfbmF2aWdhdG9yLmFjdGl2YXRlVGhyZWFkKFRocmVhZElkLklOSVQpO1xuXHRcdFx0fVxuXG5cdFx0XHQvLyBhdHRlbXB0IHRvIGhpZGUgbG9nXG5cdFx0XHR0cnkge1xuXHRcdFx0XHRkbV9sb2chLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG5cdFx0XHR9XG5cdFx0XHRjYXRjaChlX2hpZGUpIHt9XG5cblx0XHRcdC8vIGxpc3RlbiBmb3IgaGVhcnRiZWF0XG5cdFx0XHRjb25zdCBkX3NlcnZpY2U6IFZvY2FiLlR5cGVkUnVudGltZTxJbnRyYUV4dC5TZXJ2aWNlSW5zdHJ1Y3Rpb24+ID0gY2hyb21lLnJ1bnRpbWU7XG5cdFx0XHRsZXQgaV9zZXJ2aWNlX2hlYWx0aCA9IDA7XG5cdFx0XHRmdW5jdGlvbiBoZWFsdGhfY2hlY2soKSB7XG5cdFx0XHRcdGNsZWFyVGltZW91dChpX3NlcnZpY2VfaGVhbHRoKTtcblxuXHRcdFx0XHRpX3NlcnZpY2VfaGVhbHRoID0gc2V0VGltZW91dCgoKSA9PiB7XG5cdFx0XHRcdFx0dm9pZCBkX3NlcnZpY2Uuc2VuZE1lc3NhZ2Uoe1xuXHRcdFx0XHRcdFx0dHlwZTogJ3dha2UnLFxuXHRcdFx0XHRcdH0pO1xuXG5cdFx0XHRcdFx0Y29uc29sZS53YXJuKGBXYWtpbmcgaWRsZSBzZXJ2aWNlIHdvcmtlcmApO1xuXHRcdFx0XHR9LCAyZTMpO1xuXHRcdFx0fVxuXG5cdFx0XHRnbG9iYWxfcmVjZWl2ZSh7XG5cdFx0XHRcdGhlYXJ0YmVhdCgpIHtcblx0XHRcdFx0XHRoZWFsdGhfY2hlY2soKTtcblx0XHRcdFx0fSxcblx0XHRcdH0pO1xuXG5cdFx0XHQvLyB1c2VyIGlzIGxvZ2dlZCBpbiwgZW5zdXJlIHRoZSBzZXJ2aWNlIGlzIHJ1bm5pbmdcblx0XHRcdGlmKGJfbGF1bmNoKSB7XG5cdFx0XHRcdGhlYWx0aF9jaGVjaygpO1xuXHRcdFx0fVxuXHRcdH1cblx0fSk7XG5cblx0Ly8gY3JlYXRlIHN5c3RlbSBjb21wb25lbnRcblx0eWNfc3lzdGVtID0gbmV3IFN5c3RlbVN2ZWx0ZSh7XG5cdFx0dGFyZ2V0OiBkb2N1bWVudC5ib2R5LFxuXHRcdHByb3BzOiB7XG5cdFx0XHRtb2RlOiAnYXBwJyxcblx0XHRcdHBhZ2U6IGdjX3BhZ2Vfc3RhcnQsXG5cdFx0fSxcblx0XHRjb250ZXh0OiBuZXcgTWFwKG9kZShoX2NvbnRleHQpKSxcblx0fSk7XG5cblx0Ly8gY2xlYXIgaGVhbHRoIGNoZWNrXG5cdGNsZWFyVGltZW91dChpX2hlYWx0aCk7XG5cblx0Yl9idXN5ID0gZmFsc2U7XG59XG5cblxuLy8gZGV2XG5pZignbG9jYWxob3N0JyA9PT0gbG9jYXRpb24uaG9zdG5hbWUpIHtcblx0Y29uc3QgaF9wYXJhbXMgPSBPYmplY3QuZnJvbUVudHJpZXMobmV3IFVSTFNlYXJjaFBhcmFtcyhsb2NhdGlvbi5zZWFyY2guc2xpY2UoMSkpLmVudHJpZXMoKSk7XG5cblx0aWYoaF9wYXJhbXNbJ2F1dG9za2lwJ10pIHtcblx0XHRjb25zb2xlLmxvZygnQXV0b3NraXBwaW5nIHJlZ2lzdHJhdGlvbicpO1xuXG5cdFx0KGFzeW5jKCkgPT4ge1xuXHRcdFx0bG9jYWxTdG9yYWdlLmNsZWFyKCk7XG5cdFx0XHRhd2FpdCByZWdpc3RlcignICAgICAnKTtcblx0XHRcdGF3YWl0IGxvZ2luKCcgICAgICcpO1xuXHRcdFx0dm9pZCByZWxvYWQoKTtcblx0XHR9KSgpO1xuXHR9XG5cdGVsc2Uge1xuXHRcdC8vIHN0YXJ0IHN5c3RlbVxuXHRcdHZvaWQgcmVsb2FkKCk7XG5cdH1cbn1cbmVsc2Uge1xuXHQvLyBzdGFydCBoZWFsdGggY2hlY2sgdGltZXJcblx0aV9oZWFsdGggPSBnbG9iYWxUaGlzLnNldFRpbWVvdXQoKCkgPT4ge1xuXHRcdGRvbWxvZygnRmF0YWwgdGltZSBvdXQsIGxpa2VseSBjYXVzZWQgYnkgYW4gdW5jYXVnaHQgZXJyb3IuJyk7XG5cdH0sIDE1KlhUX1NFQ09ORFMpO1xuXG5cdHRyeSB7XG5cdFx0Ly8gc3RhcnQgc3lzdGVtXG5cdFx0dm9pZCByZWxvYWQoKTtcblx0fVxuXHRjYXRjaChlX2xvYWQpIHtcblx0XHRkZWJ1Z2dlcjtcblx0XHRjb25zb2xlLmVycm9yKGVfbG9hZCk7XG5cdH1cbn1cbiJdLCJuYW1lcyI6WyJpbnNlcnQiLCJ0YXJnZXQiLCJhIiwiYW5jaG9yIiwiY3R4IiwiQWNjb3VudEVkaXQiLCJwMCIsInAxIiwicDIiLCJyZXNldCIsIiQkcHJvcHMiLCJiX2FncmVlZCIsImNyZWF0ZV9hY2NvdW50IiwicF9zZWNyZXQiLCJzYV9vd25lciIsInBfcGZwIiwicF9hY2NvdW50IiwiQWNjb3VudHMiLCJrc19hY2NvdW50cyIsIkluY2lkZW50cyIsImNyZWF0ZV9wcml2YXRlX2tleSIsImtrX3NrIiwia19zZWNwIiwiU2VjcDI1NmsxS2V5Iiwic191dWlkIiwiU2VjcmV0cyIsImtzIiwiYXR1OF9zayIsImJ1ZmZlcl90b19zdHJpbmc4IiwiYXR1OF9wayIsImJ1ZmZlcl90b19iYXNlNjQiLCJzZXRfc3RvcmVfdmFsdWUiLCJ5d19hY2NvdW50X3JlZiIsIiR5d19hY2NvdW50X3JlZiIsInZhbHVlIiwiUl9TRU1WRVIiLCJzYXRpc2ZpZXMiLCJzaV92ZXJzaW9uIiwic19zZW12ZXIiLCJzX2NtcCIsInNfYmFzZSIsInNlbXZlci5sdGUiLCJzZW12ZXIubHQiLCJzZW12ZXIuZ3QiLCJzZW12ZXIuZ3RlIiwic2VtdmVyLmVxdWl2YWxlbnQiLCJjaGVja19yZXN0cmljdGlvbnMiLCJhX3Jlc3RyaWN0aW9ucyIsImFfZGVjcmVlcyIsIldlYlJlc291cmNlQ2FjaGUiLCJQX1NUQVJTSEVMTF9ERUNSRUVTIiwiZ19kZWNyZWUiLCJTSV9WRVJTSU9OIiwiZGl2MiIsInAiLCJvcGVuX2V4dGVybmFsX2xpbmsiLCJyZWxvYWQiLCJ5Y19zeXN0ZW0iLCJpX2hlYWx0aCIsImJfYnVzeSIsInFzIiwiYl9sYXVuY2giLCJnY19wYWdlX3N0YXJ0IiwiaF9jb250ZXh0IiwiZGtfcm9vdCIsIlZhdWx0IiwiUmVzdHJpY3RlZFN2ZWx0ZSIsImZfdW5yZWdpc3RlciIsImdsb2JhbF9yZWNlaXZlIiwiaW5pdGlhbGl6ZV9jYWNoZXMiLCJCbGFua1N2ZWx0ZSIsIkNyZWF0ZVdhbGxldFN2ZWx0ZSIsIkF1dGhlbnRpY2F0ZVN2ZWx0ZSIsIlByZVJlZ2lzdGVyU3ZlbHRlIiwiRl9OT09QIiwiYl9pbml0aWFsaXplZCIsImZfdW5zdWJzY3JpYmUiLCJ5d19uYXZpZ2F0b3IiLCJrX25hdmlnYXRvciIsImhlYWx0aF9jaGVjayIsImlfc2VydmljZV9oZWFsdGgiLCJkX3NlcnZpY2UiLCJUaHJlYWRJZCIsImRtX2xvZyIsIlN5c3RlbVN2ZWx0ZSIsIm9kZSIsInJlZ2lzdGVyIiwibG9naW4iLCJkb21sb2ciLCJYVF9TRUNPTkRTIiwiZV9sb2FkIl0sIm1hcHBpbmdzIjoib2xCQW1JNkMseUNBQ0osb0RBQWlFLEdBQ3pHLGdFQUR3Q0EsRUFBaUVDLEVBQUFDLEVBQUFDLENBQUEsNk5BRHRFQyxFQUFRLEtBQUEsbUJBQVJBLEVBQVEsNkVBSXBCLDhCQUErQkEsRUFBa0IsSUFBR0EsRUFBUSxXQUNsRixRQUFTQyxFQUNULE1BQUssQ0FDSixRQUFTRCxFQUFlLEVBQUEsbWVBbkIxQkosRUFFR0MsRUFBQUssRUFBQUgsQ0FBQSxXQUVISCxFQUVHQyxFQUFBTSxFQUFBSixDQUFBLFdBRUhILEVBRUdDLEVBQUFPLEVBQUFMLENBQUEseUhBRWdDQyxFQUFRLHNEQUlwQiw4QkFBK0JBLEVBQWtCLElBQUdBLEVBQVEsb0JBQ2xGLFFBQVNDLEVBQ1QsTUFBSyxDQUNKLFFBQVNELEVBQWUsRUFBQSx5akJBdkhmLEdBQUEsQ0FBQSxNQUFBSyxFQUFRLEVBQUssRUFBQUMsRUFFYixDQUFBLFNBQUFDLEVBQVcsRUFBSyxFQUFBRCxFQUVaLGVBQUFFLEVBQWVDLEVBQXNCQyxFQUFrQkMsRUFBYyxPQUU3RUMsRUFBUyxN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
